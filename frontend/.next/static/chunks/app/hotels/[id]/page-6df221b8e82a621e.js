(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{7973:function(e,r,t){Promise.resolve().then(t.bind(t,6628))},319:function(e,r,t){"use strict";t.d(r,{Z:function(){return A}});var n=t(9268),i=t(7931),o=t(7095),a=t(8235),d=t(7558),u=t(4200),l=t(4066),s=t(4240),c=t(6008),p=t(9337),h=t(6190),f=t(8902),m=t(8417);function x(e){let{...r}=e;function t(e){if(!e)return"";let r=new Date(e),t=r.getHours(),n=r.getMinutes();return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))}return(0,n.jsxs)(m.Z,{children:[(0,n.jsxs)(m.Z,{direction:"row",alignItems:"center",children:[(0,n.jsx)(h.Z,{sx:{rotate:r.inbound?"90deg":"270deg",mr:"5px"}}),(0,n.jsx)(s.Z,{fontWeight:"bold",children:function(e){if(!e)return"";let r=new Date(e);return"".concat(r.getDate(),".").concat(r.getMonth()+1,".").concat(r.getFullYear())}(r.departureDatetime)})]}),(0,n.jsxs)(m.Z,{direction:"row",sx:{height:"30px"},alignItems:"center",children:[(0,n.jsx)(s.Z,{sx:{width:"100px"},children:t(r.departureDatetime)}),(0,n.jsx)(f.Z,{sx:{width:"15px",height:"15px",borderRadius:"1000px",backgroundColor:"gray"}}),(0,n.jsx)(s.Z,{ml:"10px",children:r.departureAirport})]}),(0,n.jsxs)(m.Z,{direction:"row",sx:{height:"30px"},alignItems:"center",children:[(0,n.jsx)(f.Z,{sx:{ml:"100px"}}),(0,n.jsx)(f.Z,{sx:{width:"3px",height:"45px",ml:"6px",mr:"6px",backgroundColor:"gray"}}),(0,n.jsx)(s.Z,{fontWeight:"light",ml:"10px",children:function(e,r){if(!e||!r)return"";let t=new Date(r),n=new Date(e),i=Math.abs(t.getTime()-n.getTime()),o=Math.floor(i/36e5);return"".concat(o,"h ").concat(Math.floor((i-36e5*o)/6e4),"m")}(r.departureDatetime,r.arrivalDatetime)})]}),(0,n.jsxs)(m.Z,{direction:"row",sx:{height:"30px"},alignItems:"center",children:[(0,n.jsx)(s.Z,{sx:{width:"100px"},children:t(r.arrivalDatetime)}),(0,n.jsx)(f.Z,{sx:{width:"15px",height:"15px",borderRadius:"1000px",backgroundColor:"gray"}}),(0,n.jsx)(s.Z,{ml:"10px",children:r.arrivalAirport})]})]})}var b=t(5038),g=t(6269),v=t(4652),j=t(9222),Z=t(7305),y=t(6006),D=t(4212);t(8587);var w=t(2592);function A(e){let{offer:r,onToggleOffer:t,bookButton:h,isCheapest:f}=e,m=(0,c.useRouter)(),[A,P]=(0,y.useState)(r.isSaved),[O,_]=(0,y.useState)("#ededed"),[I,S]=(0,w.Z)("queryInput"),[C,k]=(0,w.Z)("selected_hotelid"),T=()=>(0,D.Am)("Enjoy your trip ☀️",{autoClose:1500,hideProgressBar:!1,closeOnClick:!0,draggable:!1,progress:void 0});async function M(){P(!A),await new Promise(e=>setTimeout(e,2e3)),await t(r._id),P(!A)}return(0,y.useEffect)(()=>{f&&_("#67B7D1")},[]),(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(d.Z,{sx:{backgroundColor:O},title:(0,n.jsxs)(l.ZP,{container:!0,spacing:0,children:[(0,n.jsxs)(l.ZP,{item:!0,xs:11,children:[(0,n.jsxs)(s.Z,{fontWeight:"bold",children:[r.duration," Days - ",r.outboundDepartureAirport,", ",r.outboundArrivalAirport]}),f?(0,n.jsx)(s.Z,{fontWeight:"bold",children:"✨Cheapest✨"}):(0,n.jsx)(n.Fragment,{})]}),(0,n.jsx)(l.ZP,{item:!0,xs:1,justifyContent:"end",children:(0,n.jsx)(p.Z,{direction:"row",children:(0,n.jsx)(i.Z,{onClick:M,children:A?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Z,{fontSize:"medium",color:"warning"}),(0,n.jsx)(s.Z,{color:{color:"black"},children:"Unsave"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Z,{fontSize:"medium",color:"warning"}),(0,n.jsx)(s.Z,{sx:{color:"black"},children:"Save"})]})})})})]})}),(0,n.jsx)(a.Z,{children:(0,n.jsxs)(p.Z,{direction:"row",justifyContent:"space-between",children:[(0,n.jsxs)(p.Z,{gap:2,children:[(0,n.jsx)(x,{inbound:!0,departureDatetime:r.outboundDepartureDatetime,departureAirport:r.outboundDepartureAirport,arrivalDatetime:r.outboundArrivalDatetime,arrivalAirport:r.outboundArrivalAirport}),(0,n.jsx)(x,{inbound:!1,departureDatetime:r.inboundDepartureDatetime,departureAirport:r.inboundDepartureAirport,arrivalDatetime:r.inboundArrivalDatetime,arrivalAirport:r.inboundArrivalAirport})]}),(0,n.jsxs)(p.Z,{gap:2,children:[(0,n.jsxs)(p.Z,{direction:"row",alignItems:"center",children:[(0,n.jsx)(j.Z,{}),(0,n.jsx)(s.Z,{ml:1,variant:"body1",children:r.mealType})]}),(0,n.jsxs)(p.Z,{direction:"row",alignItems:"center",children:[(0,n.jsx)(b.Z,{}),(0,n.jsx)(s.Z,{ml:1,variant:"body1",children:r.roomType})]}),r.oceanView&&(0,n.jsxs)(p.Z,{direction:"row",alignItems:"center",children:[(0,n.jsx)(Z.Z,{}),(0,n.jsx)(s.Z,{ml:1,variant:"body1",children:"Oceanview"})]})]}),(0,n.jsxs)(p.Z,{justifyContent:"end",gap:2,children:[(0,n.jsxs)(p.Z,{m:0,direction:"row",divider:(0,n.jsx)(u.Z,{orientation:"vertical",flexItem:!0}),spacing:1,children:[(0,n.jsxs)(s.Z,{variant:"body1",children:[r.duration," Days"]}),(0,n.jsxs)(s.Z,{variant:"body1",children:[r.countAdults," Adults"]}),(0,n.jsxs)(s.Z,{variant:"body1",children:[r.countChildren," Children"]})]}),(0,n.jsxs)(s.Z,{variant:"h5",textAlign:"right",children:[r.price," €"]}),h?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{variant:"contained",color:"success",onClick:T,children:"BOOK"}),(0,n.jsx)(D.Ix,{})]}):(0,n.jsx)(i.Z,{variant:"contained",onClick:function(){k("selected_hotelid",r.hotelid),m.push("hotel_offers/"+r.hotelid)},children:"VIEW HOTEL"})]})]})})]})}},6628:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return O}});var n=t(6118),i=t(9268),o=t(6008),a=t(6006),d=t(7056),u=t(1051),l=t(7251),s=t(8902),c=t(4066),p=t(1936),h=t(7083),f=t(8417),m=t(4240),x=t(4313),b=t.n(x),g=t(319),v=t(6960),j=t(6443);function Z(){let e=(0,n.Z)(["\n    query Hotel($hotelId: Float!) {\n  hotel(id: $hotelId) {\n    hotelname\n    hotelstars\n    hotelid\n  }\n}\n"]);return Z=function(){return e},e}function y(){let e=(0,n.Z)(["\n    query Offers_by_hotel($input: OfferHotelInput!) {\n  \n  offers_by_hotel(input: $input) {\n    _id\n    countadults\n    countchildren\n    hotelid\n    inboundarrivalairport\n    inboundarrivaldatetime\n    inbounddepartureairport\n    inbounddeparturedatetime\n    mealtype\n    oceanview\n    outboundarrivaldatetime\n    outboundarrivalairport\n    outbounddepartureairport\n    outbounddeparturedatetime\n    price\n    roomtype\n    isSaved\n  }\n}\n"]);return y=function(){return e},e}function D(){let e=(0,n.Z)(["\n    query Query($hotelId: Float!) {\n        minPriceOffer(hotelId: $hotelId) {\n            _id\n            countadults\n            countchildren\n            hotelid\n            inboundarrivalairport\n            inboundarrivaldatetime\n            inbounddepartureairport\n            inbounddeparturedatetime\n            mealtype\n            oceanview\n            outboundarrivaldatetime\n            outboundarrivalairport\n            outbounddepartureairport\n            outbounddeparturedatetime\n            price\n            roomtype\n            isSaved\n        }\n    }\n"]);return D=function(){return e},e}let w=(0,d.Ps)(Z()),A=(0,d.Ps)(y()),P=(0,d.Ps)(D());function O(){let e=(0,o.usePathname)(),[r,t]=(0,a.useState)(1),[n,d]=(0,a.useState)(!0),[x,Z]=(0,a.useState)([]),[y,D]=(0,a.useState)(),{data:O,error:_,loading:I}=(0,u.a)(w,{variables:{hotelId:y}}),{data:S,error:C,loading:k,fetchMore:T}=(0,u.a)(A,{variables:{input:{hotelid:y,pageNumber:r,pageSize:10}}}),[M,{data:E,loading:N,error:F}]=(0,l.D)(v.m),{data:$,loading:H,error:L}=(0,u.a)(P,{variables:{hotelId:y}});async function B(e){if(0==x.length)return[];let r=await T({variables:{pageNumber:e}}),t=r.data.offers_by_hotel;0==t.length&&d(!1),Z(e=>[...e,...t])}if((0,a.useEffect)(()=>{!k&&S&&Z(S.offers_by_hotel)},[k,S]),(0,a.useEffect)(()=>{let r=e.split("/");D(Number.parseInt(r[r.length-1]))},[e]),_||I)return(0,i.jsx)(p.Z,{});async function W(e){await M({variables:{offerId:e}})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.ZP,{container:!0,direction:"row",justifySelf:"center",justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(c.ZP,{item:!0,xs:4,children:(0,i.jsx)(m.Z,{variant:"h4",children:O.hotel.hotelname})}),(0,i.jsx)(c.ZP,{item:!0,xs:1,children:(0,i.jsx)(h.Z,{value:O.hotel.hotelstars,readOnly:!0})})]}),(0,i.jsx)(s.Z,{display:"block",marginLeft:"auto",marginRight:"auto",sx:{backgroundImage:'url("/hotels/'.concat(O.hotel.hotelid%40+1,'.jpg")'),width:"711px",height:"400px",backgroundSize:"cover"}}),H||void 0===$?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(f.Z,{children:(0,i.jsx)(f.Z,{children:(0,i.jsx)(p.Z,{})})})}):(0,i.jsx)(f.Z,{marginTop:"1%",children:(0,i.jsx)(g.Z,{bookButton:!0,isCheapest:!0,offer:{_id:$.minPriceOffer._id,isSaved:$.minPriceOffer.isSaved,hotelid:$.minPriceOffer.hotelid,price:$.minPriceOffer.price,countAdults:$.minPriceOffer.countadults,countChildren:$.minPriceOffer.countchildren,inboundDepartureAirport:$.minPriceOffer.inbounddepartureairport,inboundDepartureDatetime:$.minPriceOffer.inbounddeparturedatetime,inboundArrivalAirport:$.minPriceOffer.inboundarrivalairport,inboundArrivalDatetime:$.minPriceOffer.inboundarrivaldatetime,outboundDepartureAirport:$.minPriceOffer.outboundarrivalairport,outboundDepartureDatetime:$.minPriceOffer.outbounddeparturedatetime,outboundArrivalAirport:$.minPriceOffer.outboundarrivalairport,outboundArrivalDatetime:$.minPriceOffer.outboundarrivaldatetime,mealType:$.minPriceOffer.mealtype,oceanView:"true"==$.minPriceOffer.oceanview,roomType:$.minPriceOffer.roomtype,duration:(0,j.L)($.minPriceOffer.outbounddeparturedatetime,$.minPriceOffer.inboundarrivaldatetime)},onToggleOffer:W})}),(0,i.jsx)(b(),{pageStart:1,loadMore:B,hasMore:n,loader:(0,i.jsx)("p",{children:"Loading..."}),children:(0,i.jsx)(f.Z,{gap:3,children:void 0!==S&&x.map(e=>(0,i.jsx)(g.Z,{onToggleOffer:W,bookButton:!0,offer:{_id:e._id,isSaved:e.isSaved,hotelid:e.hotelid,price:e.price,countAdults:e.countadults,countChildren:e.countchildren,inboundDepartureAirport:e.inbounddepartureairport,inboundDepartureDatetime:e.inbounddeparturedatetime,inboundArrivalAirport:e.inboundarrivalairport,inboundArrivalDatetime:e.inboundarrivaldatetime,outboundDepartureAirport:e.outboundarrivalairport,outboundDepartureDatetime:e.outbounddeparturedatetime,outboundArrivalAirport:e.outboundarrivalairport,outboundArrivalDatetime:e.outboundarrivaldatetime,mealType:e.mealtype,oceanView:"true"==e.oceanview,roomType:e.roomtype,duration:(0,j.L)(e.outbounddeparturedatetime,e.inboundarrivaldatetime)}},(0,j.H)()))})})]})}},6960:function(e,r,t){"use strict";t.d(r,{m:function(){return a}});var n=t(6118),i=t(7056);function o(){let e=(0,n.Z)(["\n    mutation Mutation($offerId: String!) {\n        toggle_saved_offer(offer_id: $offerId)\n    }\n"]);return o=function(){return e},e}let a=(0,i.Ps)(o())},6443:function(e,r,t){"use strict";function n(e,r){let t=Date.parse(e),n=Date.parse(r);if(isNaN(t)||isNaN(n))throw Error("Invalid date format");return Math.floor(Math.abs(t-n)/864e5)}t.d(r,{H:function(){return i},L:function(){return n}});let i=()=>Math.floor(9e4*Math.random())+1e4}},function(e){e.O(0,[769,718,22,961,83,455,744],function(){return e(e.s=7973)}),_N_E=e.O()}]);